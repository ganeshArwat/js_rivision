<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chess</title>
    <link rel="stylesheet" href="style.css">
    <style>
        div.board {
            border-style: double;
            height: 578px;
            width: 578px;
        }

        div.row {
            display: flex;
        }

        div.checkbox {
            height: 70px;
            width: 70px;
            border: 2px solid black;
        }
    </style>
</head>

<body>
    <div class="board">
        <div class="row" id="1">
            <div class="checkbox" id="1" style="background-color: black;"></div>
            <div class="checkbox" id="2" style="background-color: white;"></div>
            <div class="checkbox" id="3" style="background-color: black;"></div>
            <div class="checkbox" id="4" style="background-color: white;"></div>
            <div class="checkbox" id="5" style="background-color: black;"></div>
            <div class="checkbox" id="6" style="background-color: white;"></div>
            <div class="checkbox" id="7" style="background-color: black;"></div>
            <div class="checkbox" id="8" style="background-color: white;"></div>
        </div>
        <div class="row" id="2">
            <div class="checkbox" id="9" style="background-color: white;"></div>
            <div class="checkbox" id="10" style="background-color: black;"></div>
            <div class="checkbox" id="11" style="background-color: white;"></div>
            <div class="checkbox" id="12" style="background-color: black;"></div>
            <div class="checkbox" id="13" style="background-color: white;"></div>
            <div class="checkbox" id="14" style="background-color: black;"></div>
            <div class="checkbox" id="15" style="background-color: white;"></div>
            <div class="checkbox" id="16" style="background-color: black;"></div>
        </div>
        <div class="row" id="3">
            <div class="checkbox" id="17" style="background-color: black;"></div>
            <div class="checkbox" id="18" style="background-color: white;"></div>
            <div class="checkbox" id="19" style="background-color: black;"></div>
            <div class="checkbox" id="20" style="background-color: white;"></div>
            <div class="checkbox" id="21" style="background-color: black;"></div>
            <div class="checkbox" id="22" style="background-color: white;"></div>
            <div class="checkbox" id="23" style="background-color: black;"></div>
            <div class="checkbox" id="24" style="background-color: white;"></div>
        </div>
        <div class="row" id="4">
            <div class="checkbox" id="25" style="background-color: white;"></div>
            <div class="checkbox" id="26" style="background-color: black;"></div>
            <div class="checkbox" id="27" style="background-color: white;"></div>
            <div class="checkbox" id="28" style="background-color: black;"></div>
            <div class="checkbox" id="29" style="background-color: white;"></div>
            <div class="checkbox" id="30" style="background-color: black;"></div>
            <div class="checkbox" id="31" style="background-color: white;"></div>
            <div class="checkbox" id="32" style="background-color: black;"></div>
        </div>
        <div class="row" id="5">
            <div class="checkbox" id="33" style="background-color: black;"></div>
            <div class="checkbox" id="34" style="background-color: white;"></div>
            <div class="checkbox" id="35" style="background-color: black;"></div>
            <div class="checkbox" id="36" style="background-color: white;"></div>
            <div class="checkbox" id="37" style="background-color: black;"></div>
            <div class="checkbox" id="38" style="background-color: white;"></div>
            <div class="checkbox" id="39" style="background-color: black;"></div>
            <div class="checkbox" id="40" style="background-color: white;"></div>
        </div>
        <div class="row" id="6">
            <div class="checkbox" id="41" style="background-color: white;"></div>
            <div class="checkbox" id="42" style="background-color: black;"></div>
            <div class="checkbox" id="43" style="background-color: white;"></div>
            <div class="checkbox" id="44" style="background-color: black;"></div>
            <div class="checkbox" id="45" style="background-color: white;"></div>
            <div class="checkbox" id="46" style="background-color: black;"></div>
            <div class="checkbox" id="47" style="background-color: white;"></div>
            <div class="checkbox" id="48" style="background-color: black;"></div>
        </div>
        <div class="row" id="7">
            <div class="checkbox" id="49" style="background-color: black;"></div>
            <div class="checkbox" id="50" style="background-color: white;"></div>
            <div class="checkbox" id="51" style="background-color: black;"></div>
            <div class="checkbox" id="52" style="background-color: white;"></div>
            <div class="checkbox" id="53" style="background-color: black;"></div>
            <div class="checkbox" id="54" style="background-color: white;"></div>
            <div class="checkbox" id="55" style="background-color: black;"></div>
            <div class="checkbox" id="56" style="background-color: white;"></div>
        </div>
        <div class="row" id="8">
            <div class="checkbox" id="57" style="background-color: white;"></div>
            <div class="checkbox" id="58" style="background-color: black;"></div>
            <div class="checkbox" id="59" style="background-color: white;"></div>
            <div class="checkbox" id="60" style="background-color: black;"></div>
            <div class="checkbox" id="61" style="background-color: white;"></div>
            <div class="checkbox" id="62" style="background-color: black;"></div>
            <div class="checkbox" id="63" style="background-color: white;"></div>
            <div class="checkbox" id="64" style="background-color: black;"></div>
        </div>
    </div>

    <script src="script.js"></script>
    <script>
        const board = document.querySelector(".board");

        let n = board.children.length, m = board.children[0].children.length, prev = null;

        board.addEventListener("click", e => {

            const updateBoard = (r1, c1, r2, c2, flag) => {

                for (let i = 0; i < n; i++) {

                    if (i >= r1 && c1 < m) {

                        board.children[i].children[c1].style.backgroundColor = flag ? "red" : (((i + c1) & 1) ? "white" : "black");

                        c1++;

                    }

                    if (i >= r2 && c2 >= 0) {

                        board.children[i].children[c2].style.backgroundColor = flag ? "red" : (((i + c2) & 1) ? "white" : "black");

                        c2--;

                    }

                }

            }

            if (prev) {

                let minLeft = Math.min(prev.row, prev.col), minRight = Math.min(prev.row, m - prev.col - 1);

                let prev_r1 = prev.row - minLeft, prev_c1 = prev.col - minLeft;

                let prev_r2 = prev.row - minRight, prev_c2 = prev.col + minRight;

                updateBoard(prev_r1, prev_c1, prev_r2, prev_c2, 0);

            }

            let row = parseInt(e.target.parentNode.getAttribute("id")) - 1, col = (parseInt(e.target.getAttribute("id")) - 1) % m;

            prev = { "row": row, "col": col };

            let minLeft = Math.min(row, col), minRight = Math.min(row, m - col - 1);

            let r1 = row - minLeft, c1 = col - minLeft;

            let r2 = row - minRight, c2 = col + minRight;

            updateBoard(r1, c1, r2, c2, 1);

        })
    </script>
</body>

</html>